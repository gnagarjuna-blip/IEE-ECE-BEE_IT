<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEE Objective & Descriptive Self-Test</title>
    <style>
        /* Base Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }
        .container {
            width: 95%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }
        header {
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
            margin-bottom: 20px;
        }
        .title-bar {
            background-color: #007bff;
            color: white;
            padding: 10px;
            border-radius: 5px 5px 0 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Question Section Styles */
        .question-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background-color: #fafafa;
        }
        .question-section h2 {
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
            margin-top: 0;
            color: #007bff;
        }
        .question {
            margin-bottom: 20px;
            padding: 10px;
            border-bottom: 1px dashed #eee;
        }
        .question p {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1.05em;
        }
        .option-group label {
            display: block;
            margin-bottom: 5px;
            padding: 8px;
            border-radius: 4px;
            cursor: pointer;
        }
        input[type="text"], input[type="tel"] {
            width: 90%;
            padding: 10px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .check-btn {
            padding: 8px 15px;
            background-color: #ffc107;
            color: black;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        .check-btn:hover:not(:disabled) {
            background-color: #e0a800;
        }
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            display: none; 
        }
        .correct {
            background-color: #d4edda;
            color: #155724;
        }
        .incorrect {
            background-color: #f8d7da;
            color: #721c24;
        }
        .disabled-input {
            cursor: not-allowed;
        }
        #questionsContainer {
            display: none; 
        }
        #accessButton {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #28a744;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.2em;
            cursor: pointer;
            margin-top: 25px;
        }
        /* Styles for Matching Section */
        .matching-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        .matching-table td, .matching-table th {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        .matching-table select {
            width: 95%;
            padding: 5px;
            border-radius: 3px;
        }
        .guidance {
            background-color: #e9f5ff;
            border-left: 5px solid #007bff;
            padding: 15px;
            margin-top: 10px;
            border-radius: 4px;
        }
        .guidance h4 {
            margin-top: 0;
            color: #007bff;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>BHARAT INSTITUTE OF ENGINEERING & TECHNOLOGY</h1>
        <p>BEE Objective & Descriptive Self-Assessment</p>
    </header>

    <div class="title-bar">
        Self-Testing Mode: Questions unlocked upon Hall Ticket verification.
    </div>

    <form id="loginForm">
        <div class="question-section">
            <h2>Access Test</h2>
            <div class="question">
                <label for="regName">Full Name:</label>
                <input type="text" id="regName" name="regName" required>
            </div>
            <div class="question">
                <label for="hallTicket">Hall Ticket No (Roll No):</label>
                <input type="text" id="hallTicket" name="hallTicket" required>
            </div>
            <button type="button" id="accessButton">Access Questions</button>
        </div>
    </form>
    
    <div id="questionsContainer">

        <div class="question-section">
            <h2>I. Multiple Choice Questions (10 Marks)</h2>
            <p>Select your option and click 'Check Answer' to see if you are correct.</p>
            
            <div class="question" id="q1">
                <p>1. A single-phase induction motor is generally not self-starting because:</p>
                <div class="option-group" data-answer="A">
                    <label><input type="radio" name="q1" value="A"> A) It produces a non-rotating field</label>
                    <label><input type="radio" name="q1" value="B"> B) It operates at high slip</label>
                    <label><input type="radio" name="q1" value="C"> C) It has low resistance</label>
                    <label><input type="radio" name="q1" value="D"> D) Its rotor is short-circuited</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q1')">Check Answer</button>
                <div class="feedback" id="feedback-q1"></div>
            </div>
            
            <div class="question" id="q2">
                <p>2. Which component is used for power factor improvement?</p>
                <div class="option-group" data-answer="B">
                    <label><input type="radio" name="q2" value="A"> A) Inductor</label>
                    <label><input type="radio" name="q2" value="B"> B) Capacitor</label>
                    <label><input type="radio" name="q2" value="C"> C) Resistor</label>
                    <label><input type="radio" name="q2" value="D"> D) Transformer</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q2')">Check Answer</button>
                <div class="feedback" id="feedback-q2"></div>
            </div>

            <div class="question" id="q3">
                <p>3. The core of a transformer is laminated to reduce:</p>
                <div class="option-group" data-answer="C">
                    <label><input type="radio" name="q3" value="A"> A) Copper losses</label>
                    <label><input type="radio" name="q3" value="B"> B) Hysteresis losses</label>
                    <label><input type="radio" name="q3" value="C"> C) Eddy current losses</label>
                    <label><input type="radio" name="q3" value="D"> D) Mechanical losses</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q3')">Check Answer</button>
                <div class="feedback" id="feedback-q3"></div>
            </div>

            <div class="question" id="q4">
                <p>4. Which machine’s performance is defined by its torque-slip characteristic?</p>
                <div class="option-group" data-answer="D">
                    <label><input type="radio" name="q4" value="A"> A) DC Shunt Motor</label>
                    <label><input type="radio" name="q4" value="B"> B) Auto-transformer</label>
                    <label><input type="radio" name="q4" value="C"> C) Synchronous Generator</label>
                    <label><input type="radio" name="q4" value="D"> D) Three-Phase Induction Motor</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q4')">Check Answer</button>
                <div class="feedback" id="feedback-q4"></div>
            </div>

            <div class="question" id="q5">
                <p>5. The relation between line voltage ($V_L$) and phase voltage ($V_{ph}$) in a Star connection is:</p>
                <div class="option-group" data-answer="A">
                    <label><input type="radio" name="q5" value="A"> A) $V_L = 1.732V_{ph}$</label>
                    <label><input type="radio" name="q5" value="B"> B) $V_L = 3 V_{ph}$</label>
                    <label><input type="radio" name="q5" value="C"> C) $V_L = V_{ph}$</label>
                    <label><input type="radio" name="q5" value="D"> D) none</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q5')">Check Answer</button>
                <div class="feedback" id="feedback-q5"></div>
            </div>
            
            <div class="question" id="q6">
                <p>6. Which component is primarily used to detect earth leakage current?</p>
                <div class="option-group" data-answer="B">
                    <label><input type="radio" name="q6" value="A"> A) SFU</label>
                    <label><input type="radio" name="q6" value="B"> B) ELCB</label>
                    <label><input type="radio" name="q6" value="C"> C) MLCB</label>
                    <label><input type="radio" name="q6" value="D"> D) MCCB</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q6')">Check Answer</button>
                <div class="feedback" id="feedback-q6"></div>
            </div>

            <div class="question" id="q7">
                <p>7. The unit of reactive power is:</p>
                <div class="option-group" data-answer="B">
                    <label><input type="radio" name="q7" value="A"> A) Watt (W)</label>
                    <label><input type="radio" name="q7" value="B"> B) Volt-Ampere Reactive (VAR)</label>
                    <label><input type="radio" name="q7" value="C"> C) Volt-Ampere (VA)</label>
                    <label><input type="radio" name="q7" value="D"> D) Ohm</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q7')">Check Answer</button>
                <div class="feedback" id="feedback-q7"></div>
            </div>

            <div class="question" id="q8">
                <p>8. An auto-transformer has:</p>
                <div class="option-group" data-answer="D">
                    <label><input type="radio" name="q8" value="A"> A) Two separate windings</label>
                    <label><input type="radio" name="q8" value="B"> B) No core</label>
                    <label><input type="radio" name="q8" value="C"> C) Three windings</label>
                    <label><input type="radio" name="q8" value="D"> D) A single winding</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q8')">Check Answer</button>
                <div class="feedback" id="feedback-q8"></div>
            </div>

            <div class="question" id="q9">
                <p>9. The purpose of using an MCB is to provide protection against:</p>
                <div class="option-group" data-answer="A">
                    <label><input type="radio" name="q9" value="A"> A) Over current and short circuit</label>
                    <label><input type="radio" name="q9" value="B"> B) Low voltage</label>
                    <label><input type="radio" name="q9" value="C"> C) Power factor correction</label>
                    <label><input type="radio" name="q9" value="D"> D) Radio interference</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q9')">Check Answer</button>
                <div class="feedback" id="feedback-q9"></div>
            </div>

            <div class="question" id="q10">
                <p>10. Batteries store energy in which form?</p>
                <div class="option-group" data-answer="C">
                    <label><input type="radio" name="q10" value="A"> A) Thermal</label>
                    <label><input type="radio" name="q10" value="B"> B) Mechanical</label>
                    <label><input type="radio" name="q10" value="C"> C) Chemical</label>
                    <label><input type="radio" name="q10" value="D"> D) Nuclear</label>
                </div>
                <button type="button" class="check-btn" onclick="checkAnswer('q10')">Check Answer</button>
                <div class="feedback" id="feedback-q10"></div>
            </div>

        </div>

        <div class="question-section">
            <h2>II. Fill in the Blanks (5 Marks)</h2>
            <p>Enter your answer and click 'Check Answers' for the entire section.</p>
            <div id="fib-questions">
                <div class="question" id="q11">
                    <p>11. The Cosine of the angle between voltage and current is known as: </p>
                    <input type="text" name="q11-fib" id="q11-fib" placeholder="Enter answer here">
                </div>
                <div class="question" id="q12">
                    <p>12. The EMF induced in a transformer secondary winding is is known as: </p>
                    <input type="text" name="q12-fib" id="q12-fib" placeholder="Enter answer here">
                </div>
                <div class="question" id="q13">
                    <p>13. The Flux produced by pole core in a dc machine is uniformly distributed by: </p>
                    <input type="text" name="q13-fib" id="q13-fib" placeholder="Enter answer here">
                </div>
                <div class="question" id="q14">
                    <p>14. The Three phase induction motor works on the principle of: </p>
                    <input type="text" name="q14-fib" id="q14-fib" placeholder="Enter answer here">
                </div>
                <div class="question" id="q15">
                    <p>15. The ELCB stands for: </p>
                    <input type="text" name="q15-fib" id="q15-fib" placeholder="Enter answer here">
                </div>
            </div>
            <button type="button" class="check-btn" id="checkFibBtn">Check Answers</button>
            <div class="feedback" id="feedback-fib"></div>
        </div>

        <div class="question-section">
            <h2>III. Match the Following (5 Marks)</h2>
            <p>Match the concepts in Column A with the correct Value/Type in Column B. Click 'Check Matches' for the section results.</p>
            
            <table class="matching-table">
                <thead>
                    <tr><th>Column A (Concept)</th><th>Your Match</th><th>Column B (Value/Type)</th></tr>
                </thead>
                <tbody id="matching-body">
                    <tr>
                        <td>1. Real Power</td>
                        <td><select name="match-q16" id="match-q16"><option value="">Select...</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option></select></td>
                        <td>a. $V \times I \times \cos \Phi$</td>
                    </tr>
                    <tr>
                        <td>2. Apparent Power</td>
                        <td><select name="match-q17" id="match-q17"><option value="">Select...</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option></select></td>
                        <td>b. $V \times I$</td>
                    </tr>
                    <tr>
                        <td>3. Core Losses</td>
                        <td><select name="match-q18" id="match-q18"><option value="">Select...</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option></select></td>
                        <td>c. Constant losses</td>
                    </tr>
                    <tr>
                        <td>4. Ohmic Losses</td>
                        <td><select name="match-q19" id="match-q19"><option value="">Select...</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option></select></td>
                        <td>d. Variable losses</td>
                    </tr>
                    <tr>
                        <td>5. MCB</td>
                        <td><select name="match-q20" id="match-q20"><option value="">Select...</option><option value="a">a</option><option value="b">b</option><option value="c">c</option><option value="d">d</option><option value="e">e</option></select></td>
                        <td>e. Protection against electric shock</td>
                    </tr>
                </tbody>
            </table>
            <button type="button" class="check-btn" id="checkMatchBtn">Check Matches</button>
            <div class="feedback" id="feedback-match"></div>
        </div>

        <div class="question-section">
            <h2>IV. Descriptive/Long Answer Questions</h2>
            <p>Review the questions below. Suggestions on how to structure your answer are provided in a hidden section. Click "Show Guidance" to view the suggested approach.</p>

            <div class="question">
                <p>21. A series circuit has $R = 10 \Omega$, $L = 0.1 H$, and $C = 100 \mu F$. [cite_start]Calculate the impedance and the power factor when connected to a 230 V, 50 Hz AC supply. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>Calculate Inductive Reactance ($X_L = 2\pi f L$).</li>
                        <li>Calculate Capacitive Reactance ($X_C = 1 / (2\pi f C)$).</li>
                        <li>Calculate Net Reactance ($X = |X_L - X_C|$).</li>
                        <li>Calculate Impedance ($Z = \sqrt{R^2 + X^2}$).</li>
                        <li>Calculate Power Factor ($\cos \Phi = R/Z$). State whether it is leading or lagging based on $X_L$ vs $X_C$.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>22. The maximum flux density in the core of 250/3000 Volts 50 Hz single phase transformer is $1.2 Wb/m^2$. [cite_start]If the e.m.f. per turn is $8 V$, determine primary and secondary turns? [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>Use the given voltages to identify $V_1$ and $V_2$ (250 V and 3000 V).</li>
                        <li>Use the relation: Number of turns ($N$) = Voltage ($V$) / e.m.f. per turn ($E_t$).</li>
                        <li>Calculate $N_1$ (Primary turns) using $V_1$ and $E_t$.</li>
                        <li>Calculate $N_2$ (Secondary turns) using $V_2$ and $E_t$.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>23. Define voltage regulation and efficiency of a transformer. [cite_start]Give losses in Transformer. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Voltage Regulation:** Define it as the change in secondary terminal voltage from no-load to full-load, expressed as a percentage of the full-load or no-load voltage. Provide the formula.</li>
                        <li>**Efficiency:** Define it as the ratio of output power to input power. Provide the formula: $\eta = (\text{Output Power}) / (\text{Input Power})$.</li>
                        <li>**Losses:** List and briefly explain the two major types: Iron (Core) Losses (Hysteresis and Eddy Current) and Copper (Ohmic) Losses.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>24. [cite_start]Explain about I) Switch Fuse (SFU) ii) Earth Leakage Circuit Breaker (ELCB). [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Switch Fuse Unit (SFU):** Describe its dual function (switching and protection). Explain it is a manual switch combined with a fuse, used for isolating and protecting circuits.</li>
                        <li>**ELCB:** Describe its purpose (protection against shock/earth faults). Explain its working principle: it monitors the current flowing into the earth. Note that ELCBs are often replaced by Residual Current Circuit Breakers (RCCBs) or Residual Current Devices (RCDs).</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>25. [cite_start]Describe the construction and working principle of a synchronous generator. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Construction:** Describe the two main parts: Stator (stationary armature winding) and Rotor (rotating field winding - Salient pole or Cylindrical rotor).</li>
                        <li>**Working Principle:** State the principle (Faraday's Law of Electromagnetic Induction). Explain that the DC-excited rotor creates a magnetic field, which, when rotated at synchronous speed, cuts the stationary stator conductors, inducing an AC EMF.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>26. [cite_start]Explain the different types of earthing used in electrical installations. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Definition:** Briefly define earthing (connecting equipment/system neutral to the earth mass for safety).</li>
                        <li>**Types:** Detail the common methods: Plate Earthing (using copper or GI plate buried deep), Pipe Earthing (using perforated pipes), and Rod Earthing (using copper/GI rods hammered into the ground). Mention their typical applications.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>27. [cite_start]Derive the expression for the resonant frequency of a series R-L-C circuit and explain its significance. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Resonance Condition:** State that resonance occurs when the circuit is purely resistive, i.e., $X_L = X_C$.</li>
                        <li>**Derivation:** Set $2\pi f_r L = 1 / (2\pi f_r C)$. Rearrange terms to solve for the resonant frequency ($f_r$): $f_r = 1 / (2\pi \sqrt{LC})$.</li>
                        <li>**Significance:** Explain that at resonance, impedance is minimum ($Z=R$), current is maximum, and the circuit's power factor is unity.</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>28. [cite_start]A 4500 V/225 V, 50 Hz single-phase transformer is to have an approximate e.m.f. per turn of 15 V and operate with a maximum flux of 1.4 T. Calculate (i) the number of primary and secondary turns and (ii) the cross-sectional area of the core. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**(i) Turns:** Calculate $N_1$ and $N_2$ using the relation $N = V / E_t$ (Similar to Q22).</li>
                        <li>**(ii) Area:** Use the EMF equation $E = 4.44 f \Phi_m N$. Rearrange to find the maximum flux $\Phi_m$. Then, use the maximum flux density $B_m = \Phi_m / A$ to find the cross-sectional area $A$. (Note: you will need to first calculate $\Phi_m$ using the given $E_t$ and $N_1$ or $N_2$ via the EMF per turn relation).</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>29. [cite_start]Derive EMF equation of single-phase transformer. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Start with Faraday's Law:** State that $e = -N (d\Phi/dt)$.</li>
                        <li>**Assume Flux Wave:** Assume the flux is sinusoidal: $\Phi = \Phi_m \sin(\omega t)$.</li>
                        <li>**Derivation Steps:** Differentiate the flux with respect to time to find the instantaneous EMF, $e$. Find the maximum value $E_m$.</li>
                        <li>**RMS Value:** Convert the maximum EMF ($E_m$) to the RMS value ($E = E_m / \sqrt{2}$), resulting in $E = 4.44 f \Phi_m N$. Clearly define all terms ($f, \Phi_m, N$).</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>30. [cite_start]Explain the constructional features and working principle of a DC machine. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Construction:** Describe the main parts: Yoke (Frame), Field Poles, Armature Core and Windings, Commutator, Brushes, and Air Gap.</li>
                        <li>**Working Principle (Motor/Generator):** Explain that it operates on either Lorentz Force (motor action) or Faraday's Law (generator action). Detail the role of the commutator in rectifying the AC generated in the armature to DC output (generator) or reversing current direction (motor).</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>31. [cite_start]Discuss the construction and working of a three-phase induction motor. [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Construction:** Describe the Stator (3-phase winding that creates rotating magnetic field) and Rotor (Squirrel Cage or Slip Ring type).</li>
                        <li>**Working Principle:** Explain the concept of the Rotating Magnetic Field (RMF). State that the RMF cuts the rotor conductors, inducing an EMF and current (Faraday's Law). The rotor current interacts with the RMF to produce torque (Lorentz Force), causing the rotor to spin. Stress that the rotor speed ($N$) is always less than synchronous speed ($N_s$).</li>
                    </ol>
                </div>
            </div>

            <div class="question">
                <p>32. [cite_start]Describe the construction and operation of a Miniature Circuit Breaker (MCB). [cite: 1]</p>
                <div class="guidance">
                    <h4>Suggested Approach:</h4>
                    <ol>
                        <li>**Purpose:** State that the MCB protects low-voltage electrical circuits from damage caused by excess current, typically resulting from an overload or short circuit.</li>
                        <li>**Construction & Operation:** Describe the two main tripping mechanisms:
                            <ul>
                                <li>**Thermal:** Uses a bimetallic strip for overload protection (slow trip).</li>
                                <li>**Electromagnetic:** Uses a solenoid for short-circuit protection (instantaneous trip).</li>
                            </ul>
                        </li>
                        <li>**Reset:** Mention that it can be easily reset after a fault trip.</li>
                    </ol>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // Hardcoded answers for objective questions based on the provided attachments
    const CORRECT_ANSWERS_MCQ = {
        'q1': 'A', 'q2': 'B', 'q3': 'C', 'q4': 'D', 'q5': 'A',
        'q6': 'B', 'q7': 'B', 'q8': 'D', 'q9': 'A', 'q10': 'C'
    };

    const CORRECT_ANSWERS_FIB = {
        'q11': ['POWER FACTOR', 'PF'],
        'q12': ['SECONDARY EMF', 'SECONDARY VOLTAGE'],
        'q13': ['POLE SHOE', 'POLE SHOES'],
        'q14': ['FARADAYS LAW OF ELECTROMAGNETIC INDUCTION', 'ELECTROMAGNETIC INDUCTION', 'FARADAYS LAW'],
        'q15': ['EARTH LEAKAGE CIRCUIT BREAKER']
    };

    const CORRECT_ANSWERS_MATCH = {
        'match-q16': 'a', // Real Power -> V x I x Cos Φ
        'match-q17': 'b', // Apparent Power -> V x I
        'match-q18': 'c', // Core Losses -> Constant losses
        'match-q19': 'd', // Ohmic Losses -> Variable losses
        'match-q20': 'e'  // MCB -> Protection against electric shock
    };

    // --- MCQ Logic ---
    function checkAnswer(questionId) {
        const questionElement = document.getElementById(questionId);
        const optionGroup = questionElement.querySelector('.option-group');
        const feedbackElement = document.getElementById(`feedback-${questionId}`);
        const checkBtn = questionElement.querySelector('.check-btn');
        
        const selectedOption = optionGroup.querySelector(`input[name=${questionId}]:checked`);
        
        if (!selectedOption) {
            alert("Please select an option before checking the answer.");
            return;
        }

        const userAnswer = selectedOption.value;
        const correctAnswerKey = CORRECT_ANSWERS_MCQ[questionId];
        
        const correctOptionLabel = optionGroup.querySelector(`input[value="${correctAnswerKey}"]`).closest('label').textContent.trim();
        
        if (userAnswer === correctAnswerKey) {
            feedbackElement.className = 'feedback correct';
            feedbackElement.innerHTML = '✅ **Correct!**';
        } else {
            feedbackElement.className = 'feedback incorrect';
            feedbackElement.innerHTML = `❌ **Incorrect.** The correct answer is **${correctOptionLabel}**.`;
        }

        feedbackElement.style.display = 'block';

        // Disable options and button after checking
        optionGroup.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.disabled = true;
            radio.closest('label').classList.add('disabled-input');
        });
        checkBtn.disabled = true;
        checkBtn.textContent = 'Answer Locked';
    }

    // --- Fill in the Blanks Logic ---
    function checkFibAnswers() {
        const checkBtn = document.getElementById('checkFibBtn');
        const feedbackElement = document.getElementById('feedback-fib');
        let totalCorrect = 0;
        let totalQuestions = 0;
        let detailedFeedback = '<h4>Results:</h4>';

        for (const [id, correctOptions] of Object.entries(CORRECT_ANSWERS_FIB)) {
            totalQuestions++;
            const input = document.getElementById(`${id}-fib`);
            const userAnswer = input.value.trim().toUpperCase();
            const questionText = input.closest('.question').querySelector('p').textContent.trim();
            const isCorrect = correctOptions.some(option => userAnswer === option);

            input.disabled = true;

            if (isCorrect) {
                totalCorrect++;
                detailedFeedback += `<p style="color:#155724;">✅ **Q${totalQuestions}.** Correct! (${input.value})</p>`;
            } else {
                detailedFeedback += `<p style="color:#721c24;">❌ **Q${totalQuestions}.** Incorrect. The correct answer is: **${correctOptions.join(' / ')}**</p>`;
            }
        }

        feedbackElement.style.display = 'block';
        feedbackElement.className = (totalCorrect === totalQuestions) ? 'feedback correct' : 'feedback incorrect';
        feedbackElement.innerHTML = `<p>You scored **${totalCorrect}** out of **${totalQuestions}**.</p>${detailedFeedback}`;
        
        checkBtn.disabled = true;
        checkBtn.textContent = 'Answers Locked';
    }
    
    // --- Match the Following Logic ---
    function checkMatchAnswers() {
        const checkBtn = document.getElementById('checkMatchBtn');
        const feedbackElement = document.getElementById('feedback-match');
        const selectElements = document.querySelectorAll('#matching-body select');
        let totalCorrect = 0;
        let totalQuestions = 0;
        let detailedFeedback = '<h4>Results:</h4>';

        selectElements.forEach(select => {
            totalQuestions++;
            const conceptCell = select.closest('tr').querySelector('td:first-child').textContent.trim();
            const userAnswer = select.value;
            const correctKey = CORRECT_ANSWERS_MATCH[select.id];
            
            select.disabled = true;
            
            if (userAnswer === correctKey) {
                totalCorrect++;
                detailedFeedback += `<p style="color:#155724;">✅ **${conceptCell}** matched correctly!</p>`;
            } else {
                const correctLabel = select.closest('tr').querySelector(`td:last-child`).textContent.trim();
                detailedFeedback += `<p style="color:#721c24;">❌ **${conceptCell}** was incorrect. Correct match is **${correctLabel}**.</p>`;
            }
        });

        feedbackElement.style.display = 'block';
        feedbackElement.className = (totalCorrect === totalQuestions) ? 'feedback correct' : 'feedback incorrect';
        feedbackElement.innerHTML = `<p>You correctly matched **${totalCorrect}** out of **${totalQuestions}** pairs.</p>${detailedFeedback}`;
        
        checkBtn.disabled = true;
        checkBtn.textContent = 'Answers Locked';
    }


    document.addEventListener('DOMContentLoaded', () => {
        const accessButton = document.getElementById('accessButton');
        const hallTicketInput = document.getElementById('hallTicket');
        const fullNameInput = document.getElementById('regName');
        const questionsContainer = document.getElementById('questionsContainer');
        const checkFibBtn = document.getElementById('checkFibBtn');
        const checkMatchBtn = document.getElementById('checkMatchBtn');
        
        // Setup Event Listeners
        accessButton.addEventListener('click', () => {
            const hallTicket = hallTicketInput.value.trim();
            const fullName = fullNameInput.value.trim();

            if (hallTicket !== "" && fullName !== "") {
                questionsContainer.style.display = 'block'; 
                // Lock the access inputs
                fullNameInput.disabled = true;
                hallTicketInput.disabled = true;
                accessButton.disabled = true;
                accessButton.textContent = 'Access Granted';
                accessButton.style.backgroundColor = '#1e7e34';
            } else {
                alert("Please enter your Full Name and Hall Ticket No to access the questions.");
            }
        });

        checkFibBtn.addEventListener('click', checkFibAnswers);
        checkMatchBtn.addEventListener('click', checkMatchAnswers);
    });
</script>

</body>
</html>
